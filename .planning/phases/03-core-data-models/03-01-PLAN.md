---
phase: 03-core-data-models
plan: 03-01
title: DPP Core Schema
wave: 1
depends_on: []
estimated_files: 7
---

# Plan 03-01: DPP Core Schema

## Summary

This plan delivers the Digital Product Passport (DPP) core schema with ESPR 2024/1781 mandatory fields, JSON-LD context definitions for semantic interoperability, and product-specific schema extensions for luxury goods (textile, leather, timepiece). The schemas use Schema.org IndividualProduct as the base vocabulary, extended with Galileo and ESPR namespaces. All identifiers follow GS1 Digital Link URI syntax with 14-digit GTIN format, linking to the did:galileo method defined in Phase 2.

## Requirements Covered

- **FOUND-04**: DPP schema must include GTIN identifier, material composition, carbon footprint calculation, repair/maintenance instructions, and compliance declarations per ESPR 2024/1781

## Artifacts

### JSON-LD Contexts
- `specifications/schemas/contexts/galileo.jsonld` - Main Galileo vocabulary context (extends Schema.org + GS1)
- `specifications/schemas/contexts/espr.jsonld` - ESPR-specific vocabulary for mandatory DPP fields
- `specifications/schemas/contexts/luxury.jsonld` - Luxury-specific extensions (artisan, terroir, craftsmanship)

### DPP Schemas
- `specifications/schemas/dpp/dpp-core.schema.json` - Core DPP JSON Schema with ESPR mandatory fields
- `specifications/schemas/dpp/dpp-textile.schema.json` - Textile/apparel-specific fields (fiber composition, care instructions)
- `specifications/schemas/dpp/dpp-leather.schema.json` - Leather goods-specific fields (hide origin, tannery, finish)
- `specifications/schemas/dpp/dpp-watch.schema.json` - Timepiece-specific fields (movement, complications, caliber)

## Must-Haves

1. **galileo.jsonld** includes @context with Schema.org base, GS1 EPCIS reference, and Galileo namespace definitions
2. **espr.jsonld** defines vocabulary for: materialComposition, carbonFootprint, repairInstructions, complianceDeclaration
3. **dpp-core.schema.json** validates all ESPR mandatory fields as required properties
4. **dpp-core.schema.json** uses Schema.org IndividualProduct as @type with serialNumber required
5. **All schemas** enforce 14-digit GTIN format per GS1 Digital Link 1.4.0 requirement
6. **Product schemas** extend dpp-core.schema.json using JSON Schema $ref composition
7. **All DPP documents** link to did:galileo product DID via @id field

## Approach

### Task 1: JSON-LD Context Definitions

Create the three context files that define Galileo vocabulary:

**galileo.jsonld:**
- Base context array: Schema.org, GS1 EPCIS 2.0 context
- Define galileo namespace: `https://vocab.galileo.luxury/`
- Define espr namespace: `https://vocab.galileo.luxury/espr/`
- Map core terms: materialComposition, artisanAttribution, terroirProvenance, molecularSignature

**espr.jsonld:**
- Extend galileo.jsonld
- Define ESPR-specific types: CarbonFootprint, RepairGuide, ComplianceDeclaration, MaterialComponent
- Include ISO 14067 reference for carbon methodology
- Include repairabilityIndex score (1-10 scale)

**luxury.jsonld:**
- Extend galileo.jsonld
- Define luxury-specific types: ArtisanAttribution, CraftsmanshipDetails, LimitedEdition
- Support pseudonymous artisan DIDs per research recommendation
- Include provenance grades: museum_piece, collector, excellent, good

### Task 2: DPP Core Schema

Create dpp-core.schema.json with JSON Schema draft-07:

**Required properties (ESPR mandate):**
- `@context`: Must include galileo.jsonld
- `@type`: Must be "IndividualProduct"
- `@id`: did:galileo URI format
- `identifier`: PropertyValue with gtin propertyID, 14-digit value
- `serialNumber`: String, unique product serial
- `name`: Product name
- `brand`: Brand object with @id (brand DID) and name
- `manufacturer`: Organization object
- `productionDate`: ISO 8601 date
- `countryOfOrigin`: ISO 3166-1 alpha-3

**ESPR mandatory sections:**
- `materialComposition`: Array of MaterialComponent (material, percentage, origin, certified)
- `carbonFootprint`: CarbonFootprint object (value in kgCO2e, scope array, methodology, verificationDate)
- `repairInstructions`: RepairGuide object (url, languages array, repairabilityIndex)
- `complianceDeclaration`: ComplianceDeclaration object (regulation, compliant boolean, declarationDate, notifiedBody)

**Validation patterns:**
- GTIN: `^\\d{14}$`
- did:galileo: `^did:galileo:\\d{2}:\\d{14}:21:.+$`
- ISO country: `^[A-Z]{3}$`
- Percentage: 0-100 integer, sum must equal 100

### Task 3: Product-Specific Schemas

Create three product schemas extending dpp-core:

**dpp-textile.schema.json:**
- `$ref` to dpp-core.schema.json
- Additional required: fiberComposition (array with fiber type, percentage)
- Additional required: careInstructions (wash, dry, iron symbols array)
- Optional: certifications (GOTS, OEKO-TEX references)

**dpp-leather.schema.json:**
- `$ref` to dpp-core.schema.json
- Additional required: leatherType (togo, box, clemence, etc.)
- Additional required: tanneryOrigin (tannery DID, country, process)
- Optional: finishType (natural, dyed, embossed)
- Optional: hideGrade (A+, A, B)

**dpp-watch.schema.json:**
- `$ref` to dpp-core.schema.json
- Additional required: movement (type: mechanical/automatic/quartz, caliber)
- Additional required: caseDetails (material, diameter, waterResistance)
- Optional: complications (array of complication types)
- Optional: chronometry (COSC certification, daily variance)

## Dependencies

### External Standards (must reference correctly)
- **Schema.org**: https://schema.org - Product, IndividualProduct, Brand, Organization
- **GS1 EPCIS 2.0**: https://ref.gs1.org/standards/epcis/2.0.0/epcis-context.jsonld
- **GS1 Digital Link 1.4.0**: URI syntax for GTIN identifiers
- **ISO 14067:2018**: Carbon footprint methodology reference
- **ESPR 2024/1781**: Regulatory requirements source

### Prior Phase Outputs
- **Phase 2 (02-03-PLAN)**: did:galileo method specification - DPP @id must follow this format

## Out of Scope

- Event schemas (covered in 03-02-PLAN)
- Molecular signature extension schema (covered in 03-03-PLAN)
- JSON-LD context hosting infrastructure (operational concern)
- DPP validation implementation code (specification only)
- ESPR delegated act specifics for other product categories (furniture, electronics)
- Consumer-facing DPP view templates (UI concern)
